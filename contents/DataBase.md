# 4.DataBase
**:radio_button: Contents**
* [데이터베이스 커넥션 풀](#데이터베이스-커넥션-풀)
* [정규화](#정규화)
* [Join](#Join)
* [트랜잭션(Transaction)](#Transaction)

-------

### 데이터베이스 커넥션 풀
> https://delf-lee.github.io/post/connection-pool/

* Connection pool
    * 클라이언트의 요청에 따라 각 어플리케이션의 스레드에서 데이터베이스에 접근하기 위해서는 Connection이 필요함
    * Connection pool은 이런 Connection 여러 개 생성해 두어 저장해 놓은 공간(캐시), 또는 이 공간의 Connection을 필요할 때 꺼내 쓰고 반환하는 기법을 말함.
    * example : Apache common DBCP , Tomcat-JDBC 등
    
    * **특징**
        * 매 연결마다 connection 객체를 생성하고 소멸시키는 비용을 줄임
        * 미리 생성된 connection 객체를 사용하기 때문에 DB 접근시간이 단축됨
        * DB 접근 connection 수를 제한하여, 메모리와 DB에 걸리는 부하를 조정할 수 있다.
    
* DB 접근 단계
    * 웹 컨테이너가 실행되면서 DB와 연결된 connecton 객체들을 미리 생성하여 pool에 저장함
    * DB에 요청하면, pool에서 connection 객체를 가져와 DB에 접근하고 처리가 끝나면 pool에 반환한다.
    
    <img src="./image/DB/DBconnection.png" width="70%" height="70%">
    
* connection이 부족할 경우
    * 모든 요청이 DB에 접근하고 있고, 남은 connection이 없으면, 해당 클라이언트는 대기 상태로 전환시키고, pool에 connection이 반환되면 순차적으로 대기 클라이언트에 제공됨.
    
* 비슷한 맥락으로 Thread pool이라는 개념도 있다.
    * 매 요청마다 요청을 처리할 Thread를 만드는 것이 아닌, 미리 생성한 pool 내의 Thread 를 소멸시키지 않고 재사용하여 효율적으로 자원을 활용하는 기법
    

********************

# 정규화
> http://asfirstalways.tistory.com/341
* 데이터베이스의 정규화란?
    * 데이터 베이스 정규화는 데이터베이스의 설계를 재구성하는 테크닉이다. 정규화를 통해 불필요한 데이터(redundancy)를 없앨 수 있고, 삽입/갱신/삭제 시 발생할 수 있는 각종 이상현상(Anamolies)를 방지할 수 있다.  
    * 갱신 이상에는 다음과 같은 예가 있다.
        * 1. 삽입이상(insertion anomalies) - 원하지 않는 자료의 삽입, 자료가 부족해 삽입이 되지 않아 문제 발생
        * 2. 삭제이상(deletion anomalies) - 하나의 자료만 삭제하고 싶지만, 그 자료가 포함된 튜플 전체가 삭제됨으로, 원하지 않는 정보 손실이 발생함
        * 3. 수정(갱신)이상(modification anomalies) - 정확하지 않거나 일부의 튜플만 갱신되어 정보가 모호해지거나 일관성이 없어짐.  
        
    * 데이터베이스 정규화의 목적은 주로 두가지이다.
        * 1. 불필요한 data redundancy의 제거
        * 2. 데이터 저장을 "논리적으로"하기 위해  
    
    * "나쁜" 릴레이션의 애트리뷰트들을 나누어 "좋은" 작은 릴레이션으로 분해하는 작업을하는 것이 정규화이다.
    
* 정규화의 법칙( Normalization rule) 
    * 제 1 정규형
        * 애트리뷰트의 도메인이 오직 원자값만을 포함하고, 튜플의 모든 애트리뷰트가 도메인에 속하는 하나의 값을 가져야 한다. 즉, 복합 애트리뷰트, 다중값 애트리뷰트, 중첩 릴레이션 등 비 원자적인 애트리뷰트들을 허용하지 않는 릴레이션 형태를 말한다.
    
    * 제 2 정규형
        * 모든 비주요 애트리뷰트들이 주요 애트리뷰트에 대해서 완전 함수적 종속이면 제 2 정규형을 만족한다고 볼 수 있다.
        * 완전 함수적 종속 : X->Y라고 가정했을 때, X의 어떠한 애트리뷰트라도 제거하면 더 이상 함수적 종속성이 성립하지 않는 경우를 말한다. 키가 아닌 열들이 각각 후보키에 대해 결정되는 릴레이션 형태를 말한다.
    
    * 제 3정규형 
        * 어떠한 비주요 애트리뷰트도 기본키에 대해 이행적으로 종속되지 않으면 제 3정규형을 만족한다.
        * 이행 함수적 종속 : X->Y, Y->Z의 경우 추론될 수 있는 X->Y의 종속관계를 말한다. 즉, 비주요 애트리뷰트가 비주요 애트리뷰트에 의해 종속되는 경우가 없는 릴레이션 형태를 말한다.
    
    * BCNF(Boyce-Codd) 정규형
        * 여러 후보 키가 존재하는 릴레이션에 해당하는 정규화 내용이다.
        * 복잡한 식별자 관계에 의해 발생하는 문제를 해결하기 위해 제 3정규형을 보완하고, 비주요 애트리뷰트가 후보키의 일부를 결정하는 함수적 종속성을 분해하는 과정이다.

* 제 1정규형, 제 2정규형, 제 3 정규형, BCNF 에 대한 구체적인 설명(예시)는 아래의 링크로 대신한다.

> https://yaboong.github.io/database/2018/03/09/database-normalization-1/
> https://3months.tistory.com/193


* 정규화의 장점
    * 1. 데이터베이스 변경 시 이상 현상(Anomaly) 제거
    * 2. 데이터베이스 구조 확장 시 재 디자인 최소화
        * 정규화된 데이터베이스 구조에서는 새로운 데이터 형의 추가로 인한 확장 시, 그 구조를 변경하지 않아도 되거나 일부만 변경해도 된다. 이느 ㄴ데이터베이스와 연동된 응용 프로그램에 최소한의 영향만을 미치게 되며, 응용 프로그램의 생명을 연장시킨다.
    * 3. 사용자에게 데이터 모델을 더욱 의미있게 제공 - 정규화된 테이블들과 정규화된 테이블들 간의 관계들은 현실 세계에서의 개념들과 그들관의 관계들을 반영한다.

********************

# Join
> https://doooyeon.github.io/2018/11/11/database-join.html


********************

# Transaction

