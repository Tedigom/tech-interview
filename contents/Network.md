# 2.Network
**:radio_button: Contents**
* [OSI 7계층](#osi-7계층)
* [TCP와 UDP](#tcp와-udp)
* [TCP와 UDP의 헤더 분석](#tcp와-udp의-헤더-분석)

*********
### OSI 7계층
* OSI 7계층이란?
  * OSI 7 계층은 네트워크에서 통신이 일어나는 과정을 7단계로 나눈 것을 말한다. 
  * 통신이 일어나는 과정을 단계별로 파악할 수 있다. (한눈에 알아보기 쉽다. & easy for troubleshooting the network problems)
  
  <img src="./image/Network/osi.png" width="60%" height="60%"> 

* OSI 7계층 단계
  
  * #### 1. Physical Layer
    * 전기적, 기계적 기능적 특성을 이용하여 통신 케이블로 데이터를 전송함
    * 통신단위는 비트이며, 1과 0, 즉 전기적으로 On / Off를 나타낸다
    * physical layer에서는 데이터를 전송만 할뿐, 그 데이턱 무엇인지, 어떤 에러가 있는지는 신경쓰지 않는다.
    * 통신장비, 리피터, 허브 등
    #
  
  * #### 2. DataLink Layer
    * 물리계층을 통해 송수신되는 정보의 오류와 흐름을 관리 -> 안전한 정보의 전달을 도와줌
    * DataLink Layer에서는 맥 주소를 통해 통신함. 전송되는 단위는 프레임이다.( 브리지나 스위치를 통해 맥주소를 가지고 물리계층에서 받은 정보를 전달 )
    * DataLink Layer에서는 point to point 간 신뢰성 있는 전송을 보장하기 위한 계층으로 CRC 기반의 오류 제어와 흐름 제어가 필요
    * 주소 값은 물리적으로 할당 받는다. 이는 네트워크 카드가 만들어질 때부터 맥 주소(MAC address)가 정해져 있다는 뜻 ( 프레임에 주소부여(MAC - 물리적주소))
    * 에러검출/재전송/흐름제어의 역할을 한다
    * 이더넷이 대표적인 DataLink Layer의 예
    #
    
  * #### 3. Network Layer
    * 데이터를 목적지까지 가장 안전하고 빠르게 전달하는 것이 Network Layer의 주요 기능이다. (라우팅)
    * Network Layer 에서는 경로를 선택하고 주소를 정하고 경로에 따라 패킷을 전달해주는 역할을 한다. --> 여러개의 노드를 거칠 때 마다 경로를 찾아주는 역할을 
      하는 계층으로, 데이터를 네트워크들을 통하여 전달하고, 그 과정에서 전송 계층이 요구하는 서비스 품질(QoS)을 제공하기 위한 기능적, 절차적 수단을 제공한다.
    * 네트워크 계층은 라우팅, 흐름 제어, 세그멘테이션(segmentation/desegmentation), 오류 제어, 인터네트워킹(Internetworking) 등을 수행한다. 
    * 논리적인 주소 구조(IP), 곧 네트워크 관리자가 직접 주소를 할당하는 구조를 가지며, 계층적(hierarchical)이다.
    #
    
  * 3.1 IP 계층
    * TCP/IP 상에서 IP 계층이란 네트워크의 주소 (IP 주소)를 정의하고, IP 패킷의 전달 및 라우팅을 담당하는 계층 ( 패킷을 목적지까지 전달하는 역할 )
    * 주요역할 : IP 계층에서는 그 하위계층인 데이터링크 계층의 하드웨어적인 특성에 관계없이 독립적인 역할을 수행함
    * IP 계층 상에 있는 주요 프로토콜
        * IP - 패킷의 전달을 책임짐
        * ICMP - 패킷 전달 에러의 보고 및 진단
        * 라우팅 프로토콜 - 복잡한 네트워크에서 인터 네트워킹을 위한 경로를 찾아줌

  
  * 3.2 IP 프로토콜
    * TCP/IP 기반의 인터넷 망을 통하여 데이터그램의 전달을 담당하는 프로토콜
    * 주요 기능 - IP 계층에서 IP 패킷의 라우팅 대상이 됨(Routing), IP 주소 지정(Addressing)
    * 주요 특징
        * Best-Effort Service ( 신뢰성(에러제어) 및 흐름제어 기능이 없음 )
        * Connectionless ( 비연결성 데이터그램 방식으로 전달되는 프로토콜 )
        * Unreliable ( 패킷의 완전한 전달을 보장하지 않음 ( 소실, 중복, 지연, 순서바뀜 등))
        * IPv4 헤더, IPv6 헤더, IP 주소 등 IP 패킷 헤더 내 수신 및 발신 주소를 포함함
        * Big-endian ( IP 헤더 내 바이트의 전달은 최상위 바이트(MSB)를 먼저 보냄)
        * TCP, UDP, ICMP, IGMP 등이 IP 데이터그램에 실려 전송됨

  #
  * #### 4. Transport Layer
    * 통신을 활성화하기 위한 계층, 보통 TCP 프로토콜을 이용함
    * Transport layer은 양 끝단(End to end)의 사용자들이 신뢰성 있는 데이터를 주고 받을 수 있도록 하여 상위 계층들이 데이터 전달의 유효성이나 효율성을 생각하지 않도록 한다.
    * 시퀀스 넘버 기반의 오류 제어 방식을 사용한다.
    * 전송 계층은 특정 연결의 유효성을 제어하고, 일부 프로토콜은 상태 개념이 있으며(stateful), 연결기반(connection oriented)이다. --> 전송 계층이 패킷들의 전송이 유효한지 확인하고, 전송 실패한 패킷들을 다시 전송한다.
    * 종단간 통신을 다루는 최하위 계층으로, 종단간 신뢰성 있고 효율적인 데이터를 전송하며, 오류 검출 및 복구와 흐름제어, 중복겁사 등을 수행한다.
    
    * 패킷생성(Assembly/Sequencing/Deassembly/Error detection/ Request repeat/ Flow control) 및 전송을 담당하는 계층이다./
    #
    * 4.1 TCP 프로토콜 ( Transmission control protocol )
        * 양종단 호스트 내 프로세스 상호 간 신뢰적인 연결 지향성 서비스를 제공
        * IP의 비신뢰적인 최선형 서비스에 신뢰적 연결지향성 서비스를 제공함 -> 신뢰적인 전송을 보장
        
        * 1. 신뢰성 있음(Reliable)
            * 패킷 손실, 중복, 순서바뀜 등이 없도록 보장
            * TCP 하위계층인 IP 계층의 신뢰성 없는 서비스에 대해 다방면으로 신뢰성 제공
        
        * 2. 연결 지향적 (Connection-oriented)
            * 같은 전송계층의 UDP가 비연결성(connectionless)인 것과는 달리 TCP는 연결지향적
            * 연결 관리를 위한 연결설정 및 연결해제 필요 
            * 양단간 어플리케이션과 프로세스는 TCP가 제공하는 연결성 회선을 통해 서로 통신한다.
    
    * 4.2 UDP 프로토콜 ( User Datagram Protocol )
        * 신뢰성이 낮은 프로토콜로써 완전성을 보증하지는 않지만, 가상회선을 확립할 필요 없고, 유연하며 효율적 응용의 데이터 전송에 사용됨
        
        * 1. 비연결성이고, 신뢰성이 없으며, 순서화되지 않은 Datagram 서비스 제공
            * 메세지가 제대로 도착했는지 확인하지 않음 ( 확인 응답 없음 )
            * 수신된 메세지의 순서를 맞추지 않음 ( 순서 제어 없음 )
            * 흐름 제어를 위한 피드백을 제공하지 않음 ( 흐름 제어 없음 )
            * 검사합을 제외한 특별한 오류 및 제어 없음 ( 오류 제어 거의 없음 )
            * UDP를 사용하는 프로그램 쪽에서 오류 제어 기능을 스스로 갖추어야함
            * 데이터 그램 지향의 전송계층용 프로토콜 ( 가상회선 연결 필요 없음 )
        
        * 2. 실시간 응용 및 멀티캐스팅 가능
            * 빠른 요청과 응답이 필요한 실시간 응용에 적합
            * 여러 다수 지점에 전송 가능 (1 대 다)
        
        * 3. 헤더가 단순함
            * UDP는 TCP처럼 16비트의 포트번호를 사용하지만 헤더는 고정크기의 8바이트(TCP는 20바이트) 만 사용한다 ( 헤더 처리에 많은 시간과 노력이 필요하지 않다.)

  #
    * #### 5. Session Layer
        * 데이터가 통신하기 위한 논리적인 연결을 하는 계층  - 4계층과 무관하게 응용프로그램의 관점에서 봄 ( 세션 설정, 유지, 종료, 전송 중단시 복구 등의 기능)
        * 양 끝단의 응용 프로세스가 통신을 관리하기 위한 방법을 제공한다.
        * duplex( 동시 송수신 방식 ), half-duplex( 반이중 방식 ), full duplex( 전이중 방식 )의 통신과 함께, 체크 포인팅과 유휴, 종료, 다시시작 과정등을 수행한다
        * Session Layer에서는 TCP/IP 세션을 만들고 없애는 책임을 진다.
        * 통신하는 사용자들을 동기화 하고 오류 복구 명령들을 일괄적으로 다룬다. 통신을 하기 위한 세션을 확립, 유지, 중단

   #
     * #### 6. Presentation Layer
        * 데이터 표현이 상이한 응용프로세스의 독립성을 제공하고 암호화 한다.
        * Presentation Layer은 코드 간의 번역을 담당하여 사용자 시스템에서 데이터의 형식상 차이를 다루는 부담을 응용계층으로 부터 덜어준다. MIME 인코딩, 암호화 등의 동작이 이 계층에서 이루어진다.
        * EX) EBCEIC로 인코딩된 문서 파일을 ASCII로 인코딩된 파일로 바꿔주는 것, 데이터가 TEXT인지 그림인지, GIF, JPG 인지의 구분 등이 presentation layer의 몫이다.

   #
    * #### 7. Application Layer
        * 최종 목적지로, HTTP, FTP, SMTP, POP3, IMAP, Telnet과 같은 프로토콜이 있다.
        * 해당 통신 패킷들은 위의 프로토콜에 의해 모두 처리되며, 인터넷 브라우저나, 메일 프로그램등은 프로토콜을 보다 쉽게 사용하게 해주는 응용프로그램이다. 
        * Application layer은 응용 프로세스와 직접 관계하여 일반적인 응용 서비스를 수행한다.


   #
     * 7.1 HTTP 프로토콜 ( HyperText Transfer Protocol )
        * 웹 상에서 웹 서버 및 웹 브라우저 상호간의 데이터 전송을 위한 응용계층 프로토콜
        
        * 1. 요청 및 응답의 구조 
            * 동작 형태가 클라이언트 / 서버 모델로 동작
       
       * 2. 메세지 교환 형태의 프로토콜
            * 클라이언트와 서버 간에 'HTTP 메세지' 를 주고 받으며 통신. SMTP 전자 메일 프로토콜과 유사
            * HTTP의 응답 및 요청 메세지 구성
            * HTTP 메세지 내 헤더 항목들
       
       * 3. 트랜잭션 중심의 비연결성 프로토콜
            * 종단간 연결이 없음 ( Connectionless )
            * 이전의 상태를 유지하지 않음 ( Stateless )
       
        * 4. 전송계층 프로토콜 및 사용 포트 번호
            * 전송 계층 프로토콜 : TCP
            * 사용 포토 번호 : 80번
        
        * 5. http 표준 
            * HTTP 헤더 내 Host 필드를 필수 항목으로 함 ( 1개 IP 주소에 다수의 가상 호스팅 가능 )
            * HTTP 헤더 내 Accept 필드에 의한 컨텐츠 협상
            * 잘 정의된 캐시 컨트롤
            * 블록 다누이 인코딩 전송
            * 지속 연결 회선 (keep alive connection)을 통한 재사용 가능
            
*********
### TCP와 UDP
>>>>>>> b7cc3e0408a5bba88f082200614132d2cb785d24

*********
### TCP와 UDP의 헤더 분석

*********
